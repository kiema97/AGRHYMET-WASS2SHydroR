% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stat-pipeline.R
\name{wass2s_run_basin_mods_stat}
\alias{wass2s_run_basin_mods_stat}
\title{Run the statistical pipeline for a single basin (PCR/Ridge/Lasso + meta-fusion)}
\usage{
wass2s_run_basin_mods_stat(
  basin_id,
  data_by_product,
  hybas_id = "HYBAS_ID",
  target = "Q",
  date_col = "YYYY",
  pred_pattern_by_product = NULL,
  prediction_years = NULL,
  topK = 3,
  final_fuser = "rf",
  grid_levels = 5,
  quiet = TRUE,
  target_positive = TRUE,
  ...
)
}
\arguments{
\item{basin_id}{Basin identifier value.}

\item{data_by_product}{Named list of data.frames (one per product).}

\item{hybas_id}{Name of the basin ID column.}

\item{target}{Name of the target column (default: `"Q"`).}

\item{date_col}{Name of the date column (default: `"YYYY"`).}

\item{pred_pattern_by_product}{Optional named vector/list of regex patterns
to select predictors per product (defaults to "^pt_").}

\item{prediction_years}{Optional numeric vector of length 2 giving the
start and end years for a holdout prediction period.}

\item{topK}{Integer, number of best products per model (default: 3).}

\item{final_fuser}{Name of the meta-learner to use (subset of \code{SUPPORTED_FUSERS}).}

\item{grid_levels}{Grid density for tuning both base models and meta-learner.}

\item{quiet}{Logical; if \code{FALSE}, emits informative messages.}

\item{...}{Additional parameters passed to \code{wass2s_cons_mods_stat}.}
}
\value{
A list with:
\itemize{
  \item \code{fused_by_model}: tibble with \code{YYYY}, \code{Q}, and columns \code{PCR}, \code{RIDGE}, \code{LASSO}
  \item \code{final_test}: tibble for the test year with \code{pred_final}
  \item \code{scores}: tibble with \code{HYBAS_ID}, \code{kge_final}, \code{kge_pcr}, \code{kge_ridge}, \code{kge_lasso}, \code{rmse_final}
  \item \code{leaderboards}: list of product leaderboards per model
  \item \code{cv_rs}: resampling results from meta-learner tuning (if applicable)
}
}
\description{
Consolidate predictions across products for PCR, Ridge, and Lasso,
then fuse the consolidated columns into a final prediction (last-year test).
Falls back to a simple average if the training window is too short
or meta-learning is not feasible.
}
