% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hype_orchestrate.R
\name{wass2s_hype_run_one_model}
\alias{wass2s_hype_run_one_model}
\title{Run one model workflow: prepare OBS -> update info.txt resultdir -> run HYPE}
\usage{
wass2s_hype_run_one_model(
  run_dir,
  forcing_dir,
  resultdir,
  exe_path = NULL,
  timeout_sec = 300,
  args = character(),
  env = character(),
  expected_files = character(),
  clean_regex = c("hyss_.*\\\\.log$"),
  log_prefix = NULL,
  log_regex = "hyss_.*\\\\.log$",
  check_interval = 10,
  stable_duration = 30,
  obsid = NULL,
  prefix = NULL,
  patterns = c("PRCP", "TMAX", "TMIN", "TMEAN"),
  extension = ".txt",
  date_from = NULL,
  date_to = NULL,
  write = TRUE,
  round_digits = 2,
  ...
)
}
\arguments{
\item{run_dir}{HYPE run directory (contains info.txt and static inputs).}

\item{forcing_dir}{Directory containing forcing files for the selected model.}

\item{resultdir}{Result directory name for this run (often the model ID).}

\item{exe_path}{Optional explicit path to HYPE executable. If NULL, searches for a single `.exe` in `run_dir`.}

\item{timeout_sec}{Timeout for the HYPE run.}

\item{args}{Command-line arguments passed to the executable (if supported).}

\item{env}{Named character vector of environment variables during the run.}

\item{expected_files}{Output files expected (relative to `run_dir`). If empty, defaults to `<resultdir>/timeCOUT.txt`.}

\item{clean_regex}{REGEX patterns to delete before run (applied under `run_dir`).}

\item{log_prefix}{Prefix for stdout/stderr logs.}

\item{log_regex}{REGEX for completion log detection (watchlog mode only).}

\item{check_interval}{Seconds between watch checks (watchlog mode only).}

\item{stable_duration}{Seconds of unchanged log size (watchlog mode only).}

\item{obsid}{Optional station IDs to pass to `HYPEtools::WriteObs`. If NULL, derived from column names.}

\item{prefix}{Optional prefix prepended to each pattern (e.g., `"ecmwf_"`).}

\item{patterns}{Character vector of length 4. Default: c("PRCP","TMAX","TMIN","TMEAN").}

\item{extension}{File extension (default ".txt").}

\item{date_from}{Optional start date (inclusive) for filtering (Date or coercible).}

\item{date_to}{Optional end date (inclusive) for filtering (Date or coercible).}

\item{write}{Logical; if TRUE, writes obs files into `run_dir`.}

\item{round_digits}{Digits for `WriteObs`.}

\item{...}{Extra args forwarded to `HYPEtools::WriteObs`.}
}
\value{
A one-row tibble with run metadata.
}
\description{
Typical usage: in a forcing directory containing `<model>_PRCP.txt`, `<model>_TMAX.txt`, ...
you call this function with `resultdir = model` and `prefix = paste0(model, "_")`.
}
